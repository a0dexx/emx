<div class="container">
  <div class="spinner-container" *ngIf="loading  ">
    <mat-spinner></mat-spinner>
  </div>

  <mat-form-field>

    <input matInput placeholder="Search Open Library" #searchInput>

  </mat-form-field>

  <!--  <div *ngIf="searchResults">-->
  <!--    <h2>Search Results:</h2>-->
  <!--    <ul>-->
  <!--      <li *ngFor="let book of searchResults">{{ book.title }}</li>-->
  <!--    </ul>-->
  <!--  </div>-->

  <ng-template #nobooks>
    <h2>No books found</h2>
  </ng-template>

  <h1>Book Search</h1>
  <h4 mat-subheader> Using the Openlibrary to query for books</h4>
  <h4 mat-subheader>Enter a book title in to the search bar. After every new entry, a call is made to the api. This
    table is not sortable or paginated. Just to show example of filtering </h4>

  <table *ngIf="dataSource.data.length;else nobooks" mat-table matSort class="example-table mat-elevation-z8"
         [dataSource]="dataSource">


    <ng-container matColumnDef="author">
      <mat-header-cell *matHeaderCellDef>Author</mat-header-cell>
      <mat-cell *matCellDef="let book ">{{ book['authorName']}} </mat-cell>

    </ng-container>
    <ng-container matColumnDef="title">
      <mat-header-cell *matHeaderCellDef>Title</mat-header-cell>
      <mat-cell *matCellDef="let book">
        {{ book.title }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="published">
      <mat-header-cell *matHeaderCellDef>Published Year</mat-header-cell>
      <mat-cell *matCellDef="let book">{{ book['publishedDate']|date }}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="rating">
      <mat-header-cell *matHeaderCellDef>Rating</mat-header-cell>
      <mat-cell *matCellDef="let book">{{ book.rating }}</mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>

    <mat-row *matRowDef="let row;  columns: displayedColumns; let book"></mat-row>

  </table>


</div>
